<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operaciones CRUD con PHP y MySQL | Guía Interactiva</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../css/styles.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Barra de navegación -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../index.html">
                <i class="fab fa-php fa-lg me-2"></i>Guía PHP
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../../index.html">Inicio</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Fundamentos
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../fundamentos/introduccion.html">Introducción a PHP</a></li>
                            <li><a class="dropdown-item" href="../fundamentos/sintaxis.html">Sintaxis Básica</a></li>
                            <li><a class="dropdown-item" href="../fundamentos/variables.html">Variables y Tipos</a></li>
                            <li><a class="dropdown-item" href="../fundamentos/operadores.html">Operadores</a></li>
                            <li><a class="dropdown-item" href="../fundamentos/control.html">Estructuras de Control</a></li>
                            <li><a class="dropdown-item" href="../fundamentos/funciones.html">Funciones</a></li>
                            <li><a class="dropdown-item" href="../fundamentos/arrays.html">Arrays</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Intermedio
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../intermedio/formularios.html">Formularios</a></li>
                            <li><a class="dropdown-item" href="../intermedio/cookies-sesiones.html">Cookies y Sesiones</a></li>
                            <li><a class="dropdown-item" href="../intermedio/archivos.html">Manejo de Archivos</a></li>
                            <li><a class="dropdown-item" href="../intermedio/fechas.html">Fechas y Tiempo</a></li>
                            <li><a class="dropdown-item" href="../intermedio/poo.html">Programación Orientada a Objetos</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown">
                            Bases de Datos
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="intro-mysql.html">Introducción a MySQL</a></li>
                            <li><a class="dropdown-item" href="conexion.html">Conexión a MySQL</a></li>
                            <li><a class="dropdown-item active" href="crud.html">Operaciones CRUD</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../proyecto-final.html">Proyecto Final</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5 pt-4">
        <div class="row">
            <!-- Sidebar con progreso del curso -->
            <div class="col-lg-3">
                <div class="card border-0 shadow-sm mb-4 sticky-top" style="top: 80px;">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0 text-white">Fundamentos</h5>
                    </div>
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center leccion" data-lesson-id="15">
                                <div>
                                    <input class="form-check-input lesson-checkbox me-2" type="checkbox">
                                    <a href="intro-mysql.html" class="text-decoration-none">Introducción a MySQL</a>
                                </div>
                                <span class="badge bg-secondary rounded-pill">1/3</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center leccion" data-lesson-id="16">
                                <div>
                                    <input class="form-check-input lesson-checkbox me-2" type="checkbox">
                                    <a href="conexion.html" class="text-decoration-none">Conexión a MySQL</a>
                                </div>
                                <span class="badge bg-secondary rounded-pill">2/3</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center leccion completed" data-lesson-id="17">
                                <div>
                                    <input class="form-check-input lesson-checkbox me-2" type="checkbox" checked>
                                    <a href="crud.html" class="text-decoration-none">Operaciones CRUD</a>
                                </div>
                                <span class="badge bg-success rounded-pill">3/3</span>
                            </li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <p class="mb-1 small">Progreso del módulo:</p>
                        <div class="progress">
                            <div class="progress-bar bg-info" role="progressbar" id="course-progress" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">100%</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Contenido principal -->
            <div class="col-lg-9">
                <div class="content-page">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="../../index.html">Inicio</a></li>
                            <li class="breadcrumb-item"><a href="#">Bases de Datos</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Operaciones CRUD</li>
                        </ol>
                    </nav>
                    
                    <h1 class="mb-4">Operaciones CRUD con PHP y MySQL</h1>
                    
                    <div class="alert alert-primary">
                        <h5><i class="fas fa-graduation-cap me-2"></i>Objetivos de Aprendizaje</h5>
                        <ul class="mb-0">
                            <li>Entender qué son las operaciones CRUD y su importancia</li>
                            <li>Implementar operaciones de Crear (Create) registros en MySQL desde PHP</li>
                            <li>Implementar operaciones de Leer (Read) registros en MySQL desde PHP</li>
                            <li>Implementar operaciones de Actualizar (Update) registros en MySQL desde PHP</li>
                            <li>Implementar operaciones de Eliminar (Delete) registros en MySQL desde PHP</li>
                            <li>Crear un sistema CRUD completo y funcional</li>
                        </ul>
                    </div>
                    
                    <h2>¿Qué son las Operaciones CRUD?</h2>
                    <p>
                        CRUD es un acrónimo que representa las cuatro operaciones básicas que se realizan en aplicaciones persistentes de base de datos:
                    </p>
                    
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-primary">
                                <tr>
                                    <th>Operación</th>
                                    <th>Descripción</th>
                                    <th>SQL</th>
                                    <th>HTTP</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>C</strong>reate</td>
                                    <td>Crear o añadir nuevos registros</td>
                                    <td>INSERT</td>
                                    <td>POST</td>
                                </tr>
                                <tr>
                                    <td><strong>R</strong>ead</td>
                                    <td>Leer o recuperar datos existentes</td>
                                    <td>SELECT</td>
                                    <td>GET</td>
                                </tr>
                                <tr>
                                    <td><strong>U</strong>pdate</td>
                                    <td>Actualizar o modificar datos existentes</td>
                                    <td>UPDATE</td>
                                    <td>PUT/PATCH</td>
                                </tr>
                                <tr>
                                    <td><strong>D</strong>elete</td>
                                    <td>Eliminar o borrar datos existentes</td>
                                    <td>DELETE</td>
                                    <td>DELETE</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <p>
                        Estas operaciones son fundamentales en cualquier aplicación que trabaje con bases de datos, desde un simple blog hasta complejos sistemas de gestión empresarial.
                    </p>
                    
                    <h2>Estructura de Base de Datos para Ejemplos</h2>
                    <p>
                        Antes de empezar con las operaciones CRUD, crearemos una base de datos y tabla simple para nuestros ejemplos. Usaremos una tabla de <code>usuarios</code> con los siguientes campos:
                    </p>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">-- Crear la base de datos
CREATE DATABASE IF NOT EXISTS tutorial_php;

-- Usar la base de datos
USE tutorial_php;

-- Crear la tabla usuarios
CREATE TABLE IF NOT EXISTS usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    telefono VARCHAR(15),
    fecha_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-4">
                        <i class="fas fa-info-circle me-2"></i>
                        Debes ejecutar este código SQL en tu sistema de gestión de bases de datos MySQL (como phpMyAdmin) antes de probar los ejemplos siguientes.
                    </div>
                    
                    <h2 class="mt-5">1. Crear (Create) - Insertando Registros</h2>
                    <p>
                        La operación CREATE nos permite insertar nuevos registros en la base de datos. A continuación, veremos cómo insertar un nuevo usuario:
                    </p>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Archivo: crear_usuario.php

// Conexión a la base de datos
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "tutorial_php";

// Crear conexión
$conn = new mysqli($servername, $username, $password, $dbname);

// Verificar conexión
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// Datos del formulario (normalmente vendrían de $_POST)
$nombre = "Juan Pérez";
$email = "juan@example.com";
$telefono = "1234567890";

// Preparar la consulta SQL (usando consultas preparadas para prevenir inyección SQL)
$stmt = $conn->prepare("INSERT INTO usuarios (nombre, email, telefono) VALUES (?, ?, ?)");
$stmt->bind_param("sss", $nombre, $email, $telefono);

// Ejecutar la consulta
if ($stmt->execute()) {
    echo "Usuario creado correctamente. ID: " . $conn->insert_id;
} else {
    echo "Error: " . $stmt->error;
}

// Cerrar la conexión
$stmt->close();
$conn->close();
?&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <h3>Explicación del Código</h3>
                    <ul>
                        <li><strong>Establecer la conexión</strong>: Primero configuramos la conexión con el servidor MySQL.</li>
                        <li><strong>Preparar datos</strong>: Obtenemos los datos que queremos insertar (en un caso real, vendrían de un formulario).</li>
                        <li><strong>Consulta preparada</strong>: Utilizamos consultas preparadas para prevenir ataques de inyección SQL.</li>
                        <li><strong>bind_param</strong>: Vinculamos los valores a la consulta (las "sss" indican que los tres parámetros son strings).</li>
                        <li><strong>execute</strong>: Ejecutamos la consulta y verificamos si fue exitosa.</li>
                        <li><strong>insert_id</strong>: Obtenemos el ID autogenerado del nuevo registro.</li>
                        <li><strong>Cierre</strong>: Cerramos la consulta preparada y la conexión.</li>
                    </ul>
                    
                    <h2 class="mt-5">2. Leer (Read) - Consultando Registros</h2>
                    <p>
                        La operación READ nos permite recuperar registros de la base de datos. Veremos dos ejemplos: leer todos los registros y leer un registro específico.
                    </p>
                    
                    <h3>Ejemplo 1: Leer todos los registros</h3>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Archivo: listar_usuarios.php

// Conexión a la base de datos
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "tutorial_php";

// Crear conexión
$conn = new mysqli($servername, $username, $password, $dbname);

// Verificar conexión
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// Consulta SQL
$sql = "SELECT id, nombre, email, telefono, fecha_registro FROM usuarios";
$result = $conn->query($sql);

// Verificar si hay resultados
if ($result->num_rows > 0) {
    echo "&lt;table border='1'&gt;";
    echo "&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Nombre&lt;/th&gt;&lt;th&gt;Email&lt;/th&gt;&lt;th&gt;Teléfono&lt;/th&gt;&lt;th&gt;Fecha Registro&lt;/th&gt;&lt;/tr&gt;";
    
    // Mostrar datos de cada fila
    while($row = $result->fetch_assoc()) {
        echo "&lt;tr&gt;";
        echo "&lt;td&gt;" . $row["id"] . "&lt;/td&gt;";
        echo "&lt;td&gt;" . $row["nombre"] . "&lt;/td&gt;";
        echo "&lt;td&gt;" . $row["email"] . "&lt;/td&gt;";
        echo "&lt;td&gt;" . $row["telefono"] . "&lt;/td&gt;";
        echo "&lt;td&gt;" . $row["fecha_registro"] . "&lt;/td&gt;";
        echo "&lt;/tr&gt;";
    }
    echo "&lt;/table&gt;";
} else {
    echo "0 resultados";
}

// Cerrar la conexión
$conn->close();
?&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <h3>Ejemplo 2: Leer un registro específico</h3>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Archivo: ver_usuario.php

// Conexión a la base de datos
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "tutorial_php";

// Crear conexión
$conn = new mysqli($servername, $username, $password, $dbname);

// Verificar conexión
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// ID del usuario a buscar (normalmente vendría de $_GET)
$id = 1;

// Preparar la consulta
$stmt = $conn->prepare("SELECT id, nombre, email, telefono, fecha_registro FROM usuarios WHERE id = ?");
$stmt->bind_param("i", $id); // i indica que es un entero
$stmt->execute();

// Vincular resultados
$stmt->bind_result($id, $nombre, $email, $telefono, $fecha_registro);

// Obtener datos
if ($stmt->fetch()) {
    echo "&lt;h3&gt;Detalles del Usuario&lt;/h3&gt;";
    echo "&lt;p&gt;&lt;strong&gt;ID:&lt;/strong&gt; " . $id . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Nombre:&lt;/strong&gt; " . $nombre . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; " . $email . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Teléfono:&lt;/strong&gt; " . $telefono . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Fecha de Registro:&lt;/strong&gt; " . $fecha_registro . "&lt;/p&gt;";
} else {
    echo "Usuario no encontrado";
}

// Cerrar la conexión
$stmt->close();
$conn->close();
?&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <h2 class="mt-5">3. Actualizar (Update) - Modificando Registros</h2>
                    <p>
                        La operación UPDATE nos permite modificar registros existentes en la base de datos:
                    </p>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Archivo: actualizar_usuario.php

// Conexión a la base de datos
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "tutorial_php";

// Crear conexión
$conn = new mysqli($servername, $username, $password, $dbname);

// Verificar conexión
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// Datos a actualizar (normalmente vendrían de $_POST)
$id = 1;
$nombre = "Juan Pérez Actualizado";
$telefono = "9876543210";

// Preparar la consulta SQL
$stmt = $conn->prepare("UPDATE usuarios SET nombre = ?, telefono = ? WHERE id = ?");
$stmt->bind_param("ssi", $nombre, $telefono, $id);

// Ejecutar la consulta
if ($stmt->execute()) {
    echo "Usuario actualizado correctamente. Filas afectadas: " . $stmt->affected_rows;
} else {
    echo "Error al actualizar: " . $stmt->error;
}

// Cerrar la conexión
$stmt->close();
$conn->close();
?&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <h2 class="mt-5">4. Eliminar (Delete) - Borrando Registros</h2>
                    <p>
                        La operación DELETE nos permite eliminar registros de la base de datos:
                    </p>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Archivo: eliminar_usuario.php

// Conexión a la base de datos
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "tutorial_php";

// Crear conexión
$conn = new mysqli($servername, $username, $password, $dbname);

// Verificar conexión
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// ID del usuario a eliminar (normalmente vendría de $_POST o $_GET)
$id = 1;

// Preparar la consulta SQL
$stmt = $conn->prepare("DELETE FROM usuarios WHERE id = ?");
$stmt->bind_param("i", $id);

// Ejecutar la consulta
if ($stmt->execute()) {
    echo "Usuario eliminado correctamente. Filas afectadas: " . $stmt->affected_rows;
} else {
    echo "Error al eliminar: " . $stmt->error;
}

// Cerrar la conexión
$stmt->close();
$conn->close();
?&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <h2 class="mt-5">Aplicación CRUD Completa</h2>
                    <p>
                        Ahora vamos a integrar todas las operaciones CRUD en una aplicación web simple para gestionar usuarios.
                    </p>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Esta es una estructura básica para fines educativos. En un entorno de producción, deberías implementar medidas adicionales de validación, seguridad y manejar errores de forma más robusta.
                    </div>
                    
                    <h3>1. Archivo de Conexión (db_connection.php)</h3>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Archivo: db_connection.php

// Parámetros de conexión
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "tutorial_php";

// Crear conexión
$conn = new mysqli($servername, $username, $password, $dbname);

// Verificar conexión
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// Establecer charset
$conn->set_charset("utf8");
?&gt;</code></pre>
                        </div>
                    </div>
                    
                    <h3>2. Página Principal (index.php)</h3>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Incluir archivo de conexión
require_once 'db_connection.php';

// Consulta para obtener todos los usuarios
$sql = "SELECT id, nombre, email, telefono FROM usuarios";
$result = $conn->query($sql);
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Sistema CRUD de Usuarios&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-12"&gt;
                &lt;h1 class="mb-4"&gt;Sistema CRUD de Usuarios&lt;/h1&gt;
                
                &lt;div class="mb-4"&gt;
                    &lt;a href="crear.php" class="btn btn-primary"&gt;
                        &lt;i class="fas fa-user-plus"&gt;&lt;/i&gt; Agregar Nuevo Usuario
                    &lt;/a&gt;
                &lt;/div&gt;
                
                &lt;table class="table table-striped table-bordered"&gt;
                    &lt;thead class="table-dark"&gt;
                        &lt;tr&gt;
                            &lt;th&gt;ID&lt;/th&gt;
                            &lt;th&gt;Nombre&lt;/th&gt;
                            &lt;th&gt;Email&lt;/th&gt;
                            &lt;th&gt;Teléfono&lt;/th&gt;
                            &lt;th&gt;Acciones&lt;/th&gt;
                        &lt;/tr&gt;
                    &lt;/thead&gt;
                    &lt;tbody&gt;
                        &lt;?php if ($result->num_rows > 0): ?&gt;
                            &lt;?php while($row = $result->fetch_assoc()): ?&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;&lt;?= $row['id'] ?&gt;&lt;/td&gt;
                                    &lt;td&gt;&lt;?= $row['nombre'] ?&gt;&lt;/td&gt;
                                    &lt;td&gt;&lt;?= $row['email'] ?&gt;&lt;/td&gt;
                                    &lt;td&gt;&lt;?= $row['telefono'] ?&gt;&lt;/td&gt;
                                    &lt;td&gt;
                                        &lt;a href="ver.php?id=&lt;?= $row['id'] ?&gt;" class="btn btn-sm btn-info"&gt;
                                            &lt;i class="fas fa-eye"&gt;&lt;/i&gt; Ver
                                        &lt;/a&gt;
                                        &lt;a href="editar.php?id=&lt;?= $row['id'] ?&gt;" class="btn btn-sm btn-warning"&gt;
                                            &lt;i class="fas fa-edit"&gt;&lt;/i&gt; Editar
                                        &lt;/a&gt;
                                        &lt;a href="eliminar.php?id=&lt;?= $row['id'] ?&gt;" class="btn btn-sm btn-danger" onclick="return confirm('¿Está seguro de eliminar este usuario?');"&gt;
                                            &lt;i class="fas fa-trash"&gt;&lt;/i&gt; Eliminar
                                        &lt;/a&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                            &lt;?php endwhile; ?&gt;
                        &lt;?php else: ?&gt;
                            &lt;tr&gt;
                                &lt;td colspan="5" class="text-center"&gt;No hay usuarios registrados&lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;?php endif; ?&gt;
                    &lt;/tbody&gt;
                &lt;/table&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;?php
// Cerrar la conexión
$conn->close();
?&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>
                    
                    <h3>3. Crear Usuario (crear.php)</h3>
                    
                    <div class="interactive-example">
                        <div class="code-section">
                            <pre><code class="php-code">&lt;?php
// Incluir archivo de conexión
require_once 'db_connection.php';

// Inicializar variables
$nombre = $email = $telefono = "";
$nombre_err = $email_err = "";

// Procesar datos del formulario cuando se envía
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    
    // Validar nombre
    if (empty(trim($_POST["nombre"]))) {
        $nombre_err = "Por favor ingrese un nombre.";
    } else {
        $nombre = trim($_POST["nombre"]);
    }
    
    // Validar email
    if (empty(trim($_POST["email"]))) {
        $email_err = "Por favor ingrese un email.";
    } else {
        // Preparar una consulta SELECT
        $sql = "SELECT id FROM usuarios WHERE email = ?";
        
        if ($stmt = $conn->prepare($sql)) {
            $stmt->bind_param("s", $param_email);
            $param_email = trim($_POST["email"]);
            
            if ($stmt->execute()) {
                $stmt->store_result();
                
                if ($stmt->num_rows > 0) {
                    $email_err = "Este email ya está registrado.";
                } else {
                    $email = trim($_POST["email"]);
                }
            } else {
                echo "¡Ups! Algo salió mal. Por favor, inténtelo más tarde.";
            }
            
            $stmt->close();
        }
    }
    
    // Validar teléfono
    $telefono = trim($_POST["telefono"]);
    
    // Verificar si hay errores antes de insertar en la base de datos
    if (empty($nombre_err) && empty($email_err)) {
        
        // Preparar consulta INSERT
        $sql = "INSERT INTO usuarios (nombre, email, telefono) VALUES (?, ?, ?)";
        
        if ($stmt = $conn->prepare($sql)) {
            $stmt->bind_param("sss", $param_nombre, $param_email, $param_telefono);
            
            // Establecer parámetros
            $param_nombre = $nombre;
            $param_email = $email;
            $param_telefono = $telefono;
            
            // Intentar ejecutar la consulta
            if ($stmt->execute()) {
                // Redireccionar a la página principal
                header("location: index.php");
                exit();
            } else {
                echo "¡Ups! Algo salió mal. Por favor, inténtelo más tarde.";
            }
            
            $stmt->close();
        }
    }
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Crear Usuario&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-lg-6 mx-auto"&gt;
                &lt;div class="card shadow"&gt;
                    &lt;div class="card-header bg-primary text-white"&gt;
                        &lt;h4 class="mb-0"&gt;Agregar Nuevo Usuario&lt;/h4&gt;
                    &lt;/div&gt;
                    &lt;div class="card-body"&gt;
                        &lt;form action="&lt;?= htmlspecialchars($_SERVER["PHP_SELF"]); ?&gt;" method="post"&gt;
                            &lt;div class="mb-3"&gt;
                                &lt;label for="nombre" class="form-label"&gt;Nombre&lt;/label&gt;
                                &lt;input type="text" name="nombre" class="form-control &lt;?= (!empty($nombre_err)) ? 'is-invalid' : ''; ?&gt;" value="&lt;?= $nombre; ?&gt;"&gt;
                                &lt;div class="invalid-feedback"&gt;&lt;?= $nombre_err; ?&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            
                            &lt;div class="mb-3"&gt;
                                &lt;label for="email" class="form-label"&gt;Email&lt;/label&gt;
                                &lt;input type="email" name="email" class="form-control &lt;?= (!empty($email_err)) ? 'is-invalid' : ''; ?&gt;" value="&lt;?= $email; ?&gt;"&gt;
                                &lt;div class="invalid-feedback"&gt;&lt;?= $email_err; ?&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            
                            &lt;div class="mb-3"&gt;
                                &lt;label for="telefono" class="form-label"&gt;Teléfono&lt;/label&gt;
                                &lt;input type="text" name="telefono" class="form-control" value="&lt;?= $telefono; ?&gt;"&gt;
                            &lt;/div&gt;
                            
                            &lt;div class="d-grid gap-2 d-md-flex justify-content-md-end"&gt;
                                &lt;a href="index.php" class="btn btn-secondary"&gt;Cancelar&lt;/a&gt;
                                &lt;button type="submit" class="btn btn-primary"&gt;Crear Usuario&lt;/button&gt;
                            &lt;/div&gt;
                        &lt;/form&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                            <button class="btn btn-primary mt-2 run-code-btn">Ver Resultado</button>
                        </div>
                        <div class="result-section p-3">
                            <div class="alert alert-secondary">El resultado se mostrará aquí al presionar "Ver Resultado"</div>
                        </div>
                    </div>

                    <div class="alert alert-info mt-4">
                        <h5><i class="fas fa-graduation-cap me-2"></i>Nota importante:</h5>
                        <p>
                            Por limitaciones de espacio, no se incluyen en esta página todos los archivos del sistema CRUD completo. Los archivos faltantes (ver.php, editar.php y eliminar.php) seguirían una estructura similar a los mostrados, implementando las operaciones correspondientes.
                        </p>
                        <p>
                            En el proyecto final de esta guía, desarrollarás un sistema CRUD completo y funcional con todas estas características y más.
                        </p>
                    </div>
                    
                    <h2 class="mt-5">Buenas Prácticas para Operaciones CRUD</h2>
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Recomendaciones de seguridad y optimización</h5>
                            <ul>
                                <li><strong>Usar consultas preparadas</strong>: Siempre utiliza consultas preparadas para prevenir ataques de inyección SQL.</li>
                                <li><strong>Validar datos</strong>: Valida todos los datos de entrada, tanto en el cliente como en el servidor.</li>
                                <li><strong>Sanitizar salidas</strong>: Usa funciones como <code>htmlspecialchars()</code> para sanitizar datos antes de mostrarlos.</li>
                                <li><strong>Manejo de errores</strong>: Implementa un adecuado sistema de manejo de errores y no muestres información sensible al usuario.</li>
                                <li><strong>Cerrar conexiones</strong>: Siempre cierra las conexiones y consultas preparadas después de usarlas.</li>
                                <li><strong>Transacciones</strong>: Usa transacciones para operaciones que involucran múltiples consultas relacionadas.</li>
                                <li><strong>Mensajes de error personalizados</strong>: Proporciona mensajes útiles pero que no revelen detalles internos.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h2 class="mt-4">Alternativas a SQL Puro</h2>
                    <p>
                        Aunque en esta lección hemos utilizado SQL puro con PHP, existen otras alternativas que facilitan las operaciones CRUD:
                    </p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">ORM (Object-Relational Mapping)</h5>
                                    <p class="card-text">Los ORMs como Doctrine o Eloquent permiten trabajar con objetos PHP en lugar de SQL directo.</p>
                                    <a href="https://www.doctrine-project.org/" class="btn btn-sm btn-outline-primary" target="_blank">Doctrine</a>
                                    <a href="https://laravel.com/docs/eloquent" class="btn btn-sm btn-outline-primary ms-2" target="_blank">Eloquent</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">Query Builders</h5>
                                    <p class="card-text">Las bibliotecas de construcción de consultas ofrecen una interfaz fluida para crear consultas SQL.</p>
                                    <a href="https://packagist.org/packages/aura/sqlquery" class="btn btn-sm btn-outline-primary" target="_blank">Aura.SqlQuery</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Demo en vivo -->
                    <h2 class="mt-5">Demo Interactiva: Formulario CRUD</h2>
                    <p>A continuación, puedes probar un pequeño formulario que simula una operación CREATE:</p>
                    
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            Formulario de Registro (Simulación)
                        </div>
                        <div class="card-body">
                            <form id="crud-form">
                                <div class="mb-3">
                                    <label for="nombre" class="form-label">Nombre</label>
                                    <input type="text" class="form-control" id="nombre" name="nombre" required>
                                </div>
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="telefono" class="form-label">Teléfono</label>
                                    <input type="text" class="form-control" id="telefono" name="telefono">
                                </div>
                                <button type="submit" class="btn btn-primary">Registrar</button>
                            </form>
                            <div class="crud-result mt-3"></div>
                        </div>
                    </div>
                    
                    <!-- Navegación de página -->
                    <div class="page-navigation">
                        <a href="conexion.html" class="btn btn-outline-primary">
                            <i class="fas fa-arrow-left me-2"></i> Anterior: Conexión a MySQL
                        </a>
                        <a href="../proyecto-final.html" class="btn btn-primary">
                            Siguiente: Proyecto Final <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                    
                    <!-- Ejercicio práctico -->
                    <div class="card mt-5 border-primary">
                        <div class="card-header bg-primary text-white">
                            <h4 class="mb-0"><i class="fas fa-laptop-code me-2"></i>Ejercicio Práctico</h4>
                        </div>
                        <div class="card-body">
                            <h5>Desarrolla un mini sistema CRUD</h5>
                            <p>Utilizando lo aprendido en esta lección, desarrolla un sistema CRUD para una librería en línea con las siguientes características:</p>
                            <ol>
                                <li>Una tabla <code>libros</code> con los campos: id, titulo, autor, anio_publicacion, genero y disponible (boolean)</li>
                                <li>Formulario para agregar nuevos libros</li>
                                <li>Lista de todos los libros con opciones para ver detalles, editar y eliminar</li>
                                <li>Función de búsqueda por título o autor</li>
                                <li>Opción para marcar un libro como disponible/no disponible</li>
                            </ol>
                            <div class="alert alert-light border">
                                <p><strong>Pistas:</strong></p>
                                <ul>
                                    <li>Utiliza Bootstrap para crear una interfaz atractiva</li>
                                    <li>Implementa validación de formularios</li>
                                    <li>Usa consultas preparadas para todas las operaciones con la base de datos</li>
                                    <li>Para la búsqueda, puedes usar la cláusula <code>LIKE</code> de SQL</li>
                                </ul>
                            </div>
                            <button class="btn btn-sm btn-success complete-lesson" data-bs-toggle="tooltip" title="Marcar como completada">
                                <i class="fas fa-check me-2"></i>Completar lección
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fab fa-php me-2"></i>Guía Interactiva PHP</h5>
                    <p>Aprende PHP desde cero hasta desarrollo de aplicaciones completas con bases de datos.</p>
                </div>
                <div class="col-md-3">
                    <h5>Enlaces</h5>
                    <ul class="list-unstyled">
                        <li><a href="../../index.html" class="text-white">Inicio</a></li>
                        <li><a href="../fundamentos/introduccion.html" class="text-white">Fundamentos</a></li>
                        <li><a href="intro-mysql.html" class="text-white">MySQL</a></li>
                        <li><a href="../proyecto-final.html" class="text-white">Proyecto Final</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>Recursos</h5>
                    <ul class="list-unstyled">
                        <li><a href="https://www.php.net" class="text-white" target="_blank">PHP.net</a></li>
                        <li><a href="https://www.w3schools.com/php/" class="text-white" target="_blank">W3Schools</a></li>
                        <li><a href="https://www.mysql.com/" class="text-white" target="_blank">MySQL</a></li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>© 2025 Guía Interactiva de PHP. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../js/scripts.js"></script>
</body>
</html>